import{$ as E,f as J,h as de,j as ie,k as xe,e as V,o as Oe,l as q,t as w,m as ae,n as Ce,i as R,a as O,p as se,q as K,r as Te,v as ke,w as be,d as z,c as A,x as ne,b as B,S as W,y as ce,g as ue,z as U,D as Me,s as pe,I as fe,F as je}from"./index-QHdL-lmg.js";const le=Symbol("store-raw"),D=Symbol("store-node"),T=Symbol("store-has"),ve=Symbol("store-self");function me(e){let n=e[E];if(!n&&(Object.defineProperty(e,E,{value:n=new Proxy(e,ze)}),!Array.isArray(e))){const r=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let o=0,i=r.length;o<i;o++){const s=r[o];l[s].get&&Object.defineProperty(e,s,{enumerable:l[s].enumerable,get:l[s].get.bind(n)})}}return n}function k(e){let n;return e!=null&&typeof e=="object"&&(e[E]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function N(e,n=new Set){let r,l,o,i;if(r=e!=null&&e[le])return r;if(!k(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let s=0,c=e.length;s<c;s++)o=e[s],(l=N(o,n))!==o&&(e[s]=l)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const s=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let d=0,a=s.length;d<a;d++)i=s[d],!c[i].get&&(o=e[i],(l=N(o,n))!==o&&(e[i]=l))}return e}function Q(e,n){let r=e[n];return r||Object.defineProperty(e,n,{value:r=Object.create(null)}),r}function X(e,n,r){if(e[n])return e[n];const[l,o]=xe(r,{equals:!1,internal:!0});return l.$=o,e[n]=l}function Ee(e,n){const r=Reflect.getOwnPropertyDescriptor(e,n);return!r||r.get||!r.configurable||n===E||n===D||(delete r.value,delete r.writable,r.get=()=>e[E][n]),r}function ge(e){ie()&&X(Q(e,D),ve)()}function Ie(e){return ge(e),Reflect.ownKeys(e)}const ze={get(e,n,r){if(n===le)return e;if(n===E)return r;if(n===de)return ge(e),r;const l=Q(e,D),o=l[n];let i=o?o():e[n];if(n===D||n===T||n==="__proto__")return i;if(!o){const s=Object.getOwnPropertyDescriptor(e,n);ie()&&(typeof i!="function"||e.hasOwnProperty(n))&&!(s&&s.get)&&(i=X(l,n,i)())}return k(i)?me(i):i},has(e,n){return n===le||n===E||n===de||n===D||n===T||n==="__proto__"?!0:(ie()&&X(Q(e,T),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Ie,getOwnPropertyDescriptor:Ee};function x(e,n,r,l=!1){if(!l&&e[n]===r)return;const o=e[n],i=e.length;r===void 0?(delete e[n],e[T]&&e[T][n]&&o!==void 0&&e[T][n].$()):(e[n]=r,e[T]&&e[T][n]&&o===void 0&&e[T][n].$());let s=Q(e,D),c;if((c=X(s,n,o))&&c.$(()=>r),Array.isArray(e)&&e.length!==i){for(let d=e.length;d<i;d++)(c=s[d])&&c.$();(c=X(s,"length",i))&&c.$(e.length)}(c=s[ve])&&c.$()}function Be(e,n){const r=Object.keys(n);for(let l=0;l<r.length;l+=1){const o=r[l];x(e,o,n[o])}}function De(e,n){if(typeof n=="function"&&(n=n(e)),n=N(n),Array.isArray(n)){if(e===n)return;let r=0,l=n.length;for(;r<l;r++){const o=n[r];e[r]!==o&&x(e,r,o)}x(e,"length",l)}else Be(e,n)}function H(e,n,r=[]){let l,o=e;if(n.length>1){l=n.shift();const s=typeof l,c=Array.isArray(e);if(Array.isArray(l)){for(let d=0;d<l.length;d++)H(e,[l[d]].concat(n),r);return}else if(c&&s==="function"){for(let d=0;d<e.length;d++)l(e[d],d)&&H(e,[d].concat(n),r);return}else if(c&&s==="object"){const{from:d=0,to:a=e.length-1,by:u=1}=l;for(let h=d;h<=a;h+=u)H(e,[h].concat(n),r);return}else if(n.length>1){H(e[l],n,[l].concat(r));return}o=e[l],r=[l].concat(r)}let i=n[0];typeof i=="function"&&(i=i(o,r),i===o)||l===void 0&&i==null||(i=N(i),l===void 0||k(o)&&k(i)&&!Array.isArray(i)?Be(o,i):x(e,l,i))}function Ne(...[e,n]){const r=N(e||{}),l=Array.isArray(r),o=me(r);function i(...s){J(()=>{l&&s.length===1?De(r,s[0]):H(r,s)})}return[o,i]}const oe=Symbol("store-root");function I(e,n,r,l,o){const i=n[r];if(e===i)return;const s=Array.isArray(e);if(r!==oe&&(!k(e)||!k(i)||s!==Array.isArray(i)||o&&e[o]!==i[o])){x(n,r,e);return}if(s){if(e.length&&i.length&&(!l||o&&e[0]&&e[0][o]!=null)){let a,u,h,b,y,f,g,v;for(h=0,b=Math.min(i.length,e.length);h<b&&(i[h]===e[h]||o&&i[h]&&e[h]&&i[h][o]&&i[h][o]===e[h][o]);h++)I(e[h],i,h,l,o);const p=new Array(e.length),P=new Map;for(b=i.length-1,y=e.length-1;b>=h&&y>=h&&(i[b]===e[y]||o&&i[b]&&e[y]&&i[b][o]&&i[b][o]===e[y][o]);b--,y--)p[y]=i[b];if(h>y||h>b){for(u=h;u<=y;u++)x(i,u,e[u]);for(;u<e.length;u++)x(i,u,p[u]),I(e[u],i,u,l,o);i.length>e.length&&x(i,"length",e.length);return}for(g=new Array(y+1),u=y;u>=h;u--)f=e[u],v=o&&f?f[o]:f,a=P.get(v),g[u]=a===void 0?-1:a,P.set(v,u);for(a=h;a<=b;a++)f=i[a],v=o&&f?f[o]:f,u=P.get(v),u!==void 0&&u!==-1&&(p[u]=i[a],u=g[u],P.set(v,u));for(u=h;u<e.length;u++)u in p?(x(i,u,p[u]),I(e[u],i,u,l,o)):x(i,u,e[u])}else for(let a=0,u=e.length;a<u;a++)I(e[a],i,a,l,o);i.length>e.length&&x(i,"length",e.length);return}const c=Object.keys(e);for(let a=0,u=c.length;a<u;a++)I(e[c[a]],i,c[a],l,o);const d=Object.keys(i);for(let a=0,u=d.length;a<u;a++)e[d[a]]===void 0&&x(i,d[a],void 0)}function Le(e,n={}){const{merge:r,key:l="id"}=n,o=N(e);return i=>{if(!k(i)||!k(o))return o;const s=I(o,{[oe]:i},oe,r,l);return s===void 0?i:s}}var Y=(e=>(e.InProgress="in-progress",e.Finished="finished",e))(Y||{}),t=(e=>(e.RedShip1="red-ship-1",e.RedPlane1A="red-plane-1a",e.RedPlane1B="red-plane-1b",e.RedShip2="red-ship-2",e.RedPlane2A="red-plane-2a",e.RedPlane2B="red-plane-2b",e.RedShip3="red-ship-3",e.RedPlane3A="red-plane-3a",e.RedPlane3B="red-plane-3b",e.RedShip4="red-ship-4",e.RedPlane4A="red-plane-4a",e.RedPlane4B="red-plane-4b",e.BlueShip1="blue-ship-1",e.BluePlane1A="blue-plane-1a",e.BluePlane1B="blue-plane-1b",e.BlueShip2="blue-ship-2",e.BluePlane2A="blue-plane-2a",e.BluePlane2B="blue-plane-2b",e.BlueShip3="blue-ship-3",e.BluePlane3A="blue-plane-3a",e.BluePlane3B="blue-plane-3b",e.BlueShip4="blue-ship-4",e.BluePlane4A="blue-plane-4a",e.BluePlane4B="blue-plane-4b",e))(t||{});function Fe(e){switch(e){case"red-plane-1a":case"red-plane-1b":return"red-ship-1";case"red-plane-2a":case"red-plane-2b":return"red-ship-2";case"red-plane-3a":case"red-plane-3b":return"red-ship-3";case"red-plane-4a":case"red-plane-4b":return"red-ship-4";case"blue-plane-1a":case"blue-plane-1b":return"blue-ship-1";case"blue-plane-2a":case"blue-plane-2b":return"blue-ship-2";case"blue-plane-3a":case"blue-plane-3b":return"blue-ship-3";case"blue-plane-4a":case"blue-plane-4b":return"blue-ship-4";default:return null}}function Ge(e){switch(e){case"red-ship-1":return["red-plane-1a","red-plane-1b"];case"red-ship-2":return["red-plane-2a","red-plane-2b"];case"red-ship-3":return["red-plane-3a","red-plane-3b"];case"red-ship-4":return["red-plane-4a","red-plane-4b"];case"blue-ship-1":return["blue-plane-1a","blue-plane-1b"];case"blue-ship-2":return["blue-plane-2a","blue-plane-2b"];case"blue-ship-3":return["blue-plane-3a","blue-plane-3b"];case"blue-ship-4":return["blue-plane-4a","blue-plane-4b"];default:return[]}}function Pe(e){return e==="kamikaze"||e==="plane"}function He({piece:e,pieces:n,turn:r,board:l,lastMove:o,winner:i}){let s=[];if(i||e.status!=="in-play"||e.owner!==r)return s;const c=o?.piece.owner===r,d=o?.moveType==="attack",a=o?.piece.id===e.id;if(c&&d&&!a)return s;const u=c&&d&&a;if(e.type==="plane"&&!u){const m=Fe(e.id);if(!m)return s;const _=n[m],C=e.position.y-_.position.y;if(e.owner==="red"?C>=3:C<=-3)return s}const h=e.position.y%2===0,b=h?1:-1,y=e.position.x,f=(h||y>0)&&(!h||y<3)&&y+b,g=e.owner==="red"?1:-1;function v(m,_){return l[m][_]===null}function p(m,_){return m>=0&&m<=3&&_>=0&&_<=7}function P(m,_){const C=l[m][_];return p(m,_)&&!v(m,_)&&C&&C.owner!==e.owner}function M({x:m,y:_,xInc:C,yInc:L}){const j=_+L;if(v(m,j)&&!u)s.push({moveType:"move",position:{x:m,y:j}});else if(Pe(e.type)&&P(m,j)){const F=m-C,ee=j+L;p(F,ee)&&v(F,ee)&&s.push({moveType:"attack",position:{x:F,y:ee}})}}return M({x:y,y:e.position.y,xInc:b,yInc:g}),typeof f=="number"&&M({x:f,y:e.position.y,xInc:0,yInc:g}),e.type==="kamikaze"&&(M({x:y,y:e.position.y,xInc:b,yInc:-g}),typeof f=="number"&&M({x:f,y:e.position.y,xInc:0,yInc:-g})),(s.some(m=>m.moveType==="attack")||u)&&(s=s.filter(m=>m.moveType==="attack")),s}function we({pieces:e,turn:n,board:r,lastMove:l,winner:o}){const i={};let s=!1;for(const c in e){const d=e[c];if(d.status==="in-play"){const a=He({piece:d,pieces:e,turn:n,board:r,lastMove:l,winner:o});i[d.id]=a,s||(s=(i[d.id]??[]).some(u=>u.moveType==="attack"))}}return s&&Object.keys(i).forEach(c=>{i[c]=(i[c]??[]).filter(d=>d.moveType==="attack")}),i}function _e(e){const n=Array.from({length:4},()=>Array.from({length:8},()=>null));return Object.values(e).forEach(r=>{r.status==="in-play"&&(n[r.position.x][r.position.y]=JSON.parse(JSON.stringify(r)))}),n}function Se(e){return`savedGame-${e}`}function Je(e){const n=localStorage.getItem(Se(e));return n?JSON.parse(n):void 0}const Re=({pieces:e,player:n,turn:r})=>({lastMove:void 0,selectedPieceId:void 0,player:n,turn:r,phase:Y.InProgress,winner:void 0,pieces:e,destinations:[],pieceToDestinations:we({pieces:e,turn:r,board:_e(e),lastMove:void 0,winner:void 0})}),We={[t.RedShip1]:{id:t.RedShip1,type:"ship",number:1,owner:"red",status:"in-play",position:{x:0,y:0}},[t.RedPlane1A]:{id:t.RedPlane1A,type:"plane",number:1,owner:"red",status:"in-play",position:{x:0,y:1}},[t.RedPlane1B]:{id:t.RedPlane1B,type:"plane",number:1,owner:"red",status:"in-play",position:{x:0,y:2}},[t.RedShip2]:{id:t.RedShip2,type:"ship",number:2,owner:"red",status:"in-play",position:{x:1,y:0}},[t.RedPlane2A]:{id:t.RedPlane2A,type:"plane",number:2,owner:"red",status:"in-play",position:{x:1,y:1}},[t.RedPlane2B]:{id:t.RedPlane2B,type:"plane",number:2,owner:"red",status:"in-play",position:{x:1,y:2}},[t.RedShip3]:{id:t.RedShip3,type:"ship",number:3,owner:"red",status:"in-play",position:{x:2,y:0}},[t.RedPlane3A]:{id:t.RedPlane3A,type:"plane",number:3,owner:"red",status:"in-play",position:{x:2,y:1}},[t.RedPlane3B]:{id:t.RedPlane3B,type:"plane",number:3,owner:"red",status:"in-play",position:{x:2,y:2}},[t.RedShip4]:{id:t.RedShip4,type:"ship",number:4,owner:"red",status:"in-play",position:{x:3,y:0}},[t.RedPlane4A]:{id:t.RedPlane4A,type:"plane",number:4,owner:"red",status:"in-play",position:{x:3,y:1}},[t.RedPlane4B]:{id:t.RedPlane4B,type:"plane",number:4,owner:"red",status:"in-play",position:{x:3,y:2}},[t.BlueShip1]:{id:t.BlueShip1,type:"ship",number:1,owner:"blue",status:"in-play",position:{x:0,y:7}},[t.BluePlane1A]:{id:t.BluePlane1A,type:"plane",number:1,owner:"blue",status:"in-play",position:{x:0,y:6}},[t.BluePlane1B]:{id:t.BluePlane1B,type:"plane",number:1,owner:"blue",status:"in-play",position:{x:0,y:5}},[t.BlueShip2]:{id:t.BlueShip2,type:"ship",number:2,owner:"blue",status:"in-play",position:{x:1,y:7}},[t.BluePlane2A]:{id:t.BluePlane2A,type:"plane",number:2,owner:"blue",status:"in-play",position:{x:1,y:6}},[t.BluePlane2B]:{id:t.BluePlane2B,type:"plane",number:2,owner:"blue",status:"in-play",position:{x:1,y:5}},[t.BlueShip3]:{id:t.BlueShip3,type:"ship",number:3,owner:"blue",status:"in-play",position:{x:2,y:7}},[t.BluePlane3A]:{id:t.BluePlane3A,type:"plane",number:3,owner:"blue",status:"in-play",position:{x:2,y:6}},[t.BluePlane3B]:{id:t.BluePlane3B,type:"plane",number:3,owner:"blue",status:"in-play",position:{x:2,y:5}},[t.BlueShip4]:{id:t.BlueShip4,type:"ship",number:4,owner:"blue",status:"in-play",position:{x:3,y:7}},[t.BluePlane4A]:{id:t.BluePlane4A,type:"plane",number:4,owner:"blue",status:"in-play",position:{x:3,y:6}},[t.BluePlane4B]:{id:t.BluePlane4B,type:"plane",number:4,owner:"blue",status:"in-play",position:{x:3,y:5}}};t.RedShip1+"",t.RedShip1,t.RedPlane1A+"",t.RedPlane1A,t.RedPlane1B+"",t.RedPlane1B,t.RedShip2+"",t.RedShip2,t.RedPlane2A+"",t.RedPlane2A,t.RedPlane2B+"",t.RedPlane2B,t.RedShip3+"",t.RedShip3,t.RedPlane3A+"",t.RedPlane3A,t.RedPlane3B+"",t.RedPlane3B,t.RedShip4+"",t.RedShip4,t.RedPlane4A+"",t.RedPlane4A,t.RedPlane4B+"",t.RedPlane4B,t.BlueShip1+"",t.BlueShip1,t.BluePlane1A+"",t.BluePlane1A,t.BluePlane1B+"",t.BluePlane1B,t.BlueShip2+"",t.BlueShip2,t.BluePlane2A+"",t.BluePlane2A,t.BluePlane2B+"",t.BluePlane2B,t.BlueShip3+"",t.BlueShip3,t.BluePlane3A+"",t.BluePlane3A,t.BluePlane3B+"",t.BluePlane3B,t.BlueShip4+"",t.BlueShip4,t.BluePlane4A+"",t.BluePlane4A,t.BluePlane4B+"",t.BluePlane4B;t.RedShip1+"",t.RedShip1,t.RedPlane1A+"",t.RedPlane1A,t.RedPlane1B+"",t.RedPlane1B,t.RedShip2+"",t.RedShip2,t.RedPlane2A+"",t.RedPlane2A,t.RedPlane2B+"",t.RedPlane2B,t.RedShip3+"",t.RedShip3,t.RedPlane3A+"",t.RedPlane3A,t.RedPlane3B+"",t.RedPlane3B,t.RedShip4+"",t.RedShip4,t.RedPlane4A+"",t.RedPlane4A,t.RedPlane4B+"",t.RedPlane4B,t.BlueShip1+"",t.BlueShip1,t.BluePlane1A+"",t.BluePlane1A,t.BluePlane1B+"",t.BluePlane1B,t.BlueShip2+"",t.BlueShip2,t.BluePlane2A+"",t.BluePlane2A,t.BluePlane2B+"",t.BluePlane2B,t.BlueShip3+"",t.BlueShip3,t.BluePlane3A+"",t.BluePlane3A,t.BluePlane3B+"",t.BluePlane3B,t.BlueShip4+"",t.BlueShip4,t.BluePlane4A+"",t.BluePlane4A,t.BluePlane4B+"",t.BluePlane4B;function te(e,n,r){V(()=>{const l=e.on(n,r);Oe(l)})}function Ve(e){V(q(()=>JSON.stringify(e.game.lastMove),()=>{if(!e.game.lastMove)return;const n=e.game.lastMove.moveType!=="attack",r=(e.pieceToDestinations()[e.game.lastMove.piece.id]??[]).length===0;(n||r)&&e.emitter.emit("turnChange",JSON.parse(JSON.stringify({eventType:"turnChange",from:e.game.turn,to:e.game.turn==="red"?"blue":"red"})))},{defer:!0})),V(q(()=>e.game.turn,()=>{if(e.game.phase===Y.Finished)return;const{hasMove:n,numPlanes:r}=Object.values(e.game.pieces).filter(i=>i.owner===e.game.turn).reduce((i,s)=>(Pe(s.type)&&s.status==="in-play"&&i.numPlanes++,i.hasMove||(i.hasMove=(e.pieceToDestinations()[s.id]??[]).length>0),i),{hasMove:!1,numPlanes:0}),l=r?n?void 0:"no-moves":"no-planes";if(!l)return e.game.turn;const o=e.game.turn==="red"?"blue":"red";e.emitter.emit("gameEnd",JSON.parse(JSON.stringify({eventType:"gameEnd",winner:o,loser:e.game.turn,reason:l})))},{defer:!0}))}var Ke=w('<svg xmlns=http://www.w3.org/2000/svg xml:space=preserve width=800 height=800 fill=currentColor viewBox="0 0 512.001 512.001"><path d="m504.371 218.697-33.9-21.997 14.495-37.723c3.705-9.645-2.13-20.32-12.243-22.413-44.013-9.104-83.431-11.335-117.488-6.667-6.148-33.886-20.476-70.704-42.727-109.734-5.115-8.974-17.074-11.222-25.1-4.718l-31.396 25.444-31.397-25.444c-8.028-6.504-19.983-4.255-25.1 4.717-22.261 39.047-36.562 75.846-42.646 109.677-34.134-4.63-73.588-2.381-117.592 6.724-10.118 2.093-15.946 12.772-12.243 22.412l14.497 37.723-33.9 21.997c-8.649 5.612-10.235 17.675-3.269 25.329 30.26 33.241 60.843 58.215 91.141 74.455-14.949 31.034-25.001 69.247-29.942 113.906-1.138 10.285 7.241 19.117 17.533 18.57l40.355-2.131 10.446 39.041c2.68 10.02 13.705 15.169 23.078 10.936 40.966-18.508 74.17-39.878 98.977-63.673 24.896 23.807 58.134 45.176 99.075 63.673 9.415 4.253 20.411-.959 23.078-10.936l10.446-39.041 40.355 2.131c10.291.547 18.672-8.284 17.533-18.57-4.944-44.681-15.007-82.863-29.972-113.809 30.334-16.32 60.929-41.327 91.172-74.55 6.943-7.622 5.416-19.694-3.266-25.329m-117.557 77.096c-9.209 4.021-12.829 15.207-7.722 23.863 14.867 25.192 25.419 57.68 31.457 96.778l-33.789-1.785a16.73 16.73 0 0 0-17.065 12.399l-8.746 32.689c-35.314-17.817-63.012-37.904-82.494-59.854-6.676-7.52-18.427-7.503-25.081.03-19.367 21.923-47.006 41.997-82.324 59.821l-8.745-32.688a16.75 16.75 0 0 0-17.065-12.399l-33.789 1.785c6.034-39.096 16.58-71.645 31.432-96.955 5.088-8.667 1.442-19.843-7.779-23.846-26.835-11.644-54.468-31.723-82.333-59.806l28.386-18.418a16.75 16.75 0 0 0 6.52-20.059l-12.139-31.586c39.051-6.343 73.269-6.373 101.929-.066 9.809 2.161 19.319-4.758 20.274-14.766 2.783-29.117 13.344-61.603 31.436-96.774l26.289 21.303a16.75 16.75 0 0 0 21.094 0l26.288-21.304c18.097 35.172 28.697 67.698 31.558 96.898.978 9.982 10.477 16.9 20.308 14.719 28.553-6.352 62.715-6.343 101.752-.007l-12.137 31.585a16.75 16.75 0 0 0 6.518 20.061l28.384 18.418c-27.86 28.085-55.523 48.218-82.417 59.964"></path><path d="M368.172 223.067c-2.859-8.799-12.312-13.617-21.106-10.754l-50.559 16.427c-5.865-7.631-13.865-13.534-23.102-16.81v-53.134c0-9.251-7.5-16.751-16.751-16.751s-16.639 7.5-16.639 16.751v53.134c-9.238 3.276-17.348 9.18-23.214 16.81l-50.558-16.427c-8.799-2.862-18.249 1.957-21.106 10.754-2.859 8.798 1.956 18.249 10.755 21.106l50.542 16.423a49.97 49.97 0 0 0 8.834 27.168l-31.243 43.003c-5.437 7.484-3.778 17.959 3.706 23.398 7.485 5.437 17.959 3.778 23.398-3.706l31.231-42.986a50.06 50.06 0 0 0 28.586 0l31.231 42.986c5.438 7.484 15.912 9.144 23.398 3.706 7.484-5.438 9.144-15.913 3.706-23.398l-31.243-43.003a49.94 49.94 0 0 0 8.835-27.167l50.543-16.423c8.799-2.858 13.614-12.308 10.756-21.107m-111.519 52.985c-9.236 0-16.751-7.513-16.751-16.751 0-9.237 7.515-16.751 16.751-16.751s16.751 7.515 16.751 16.751c.001 9.236-7.514 16.751-16.751 16.751">');const Xe=(e={})=>(()=>{var n=Ke();return ae(n,e,!0,!0),n})();var Ye=w('<svg xmlns=http://www.w3.org/2000/svg xml:space=preserve width=800 height=800 fill=currentColor viewBox="0 0 182.74 182.74"><path d="M170.006 58.37h-55.649l.013-29.764c0-8.608-4.652-13.881-13.813-15.778C99.107 5.612 96.164 0 91.541 0c-4.653 0-7.605 5.686-9.045 12.971-8.71 2.014-13.126 7.242-13.126 15.635V58.37H12.734c-4.061 0-7.364 3.469-7.364 7.733v13.883c0 3.872 2.931 7.64 6.679 8.58l18.663 4.637c2.909.73 7.602 1.167 10.458 1.167h30.395c.849 8.911 1.623 18.373 1.623 23.288 0 4.185 1.318 9.516 1.374 9.74l6.189 20.412-19.643 5.618c-2.657.735-4.738 3.463-4.738 6.21v5.63c0 2.909 2.376 5.103 5.527 5.103H84.32c1.649 8.539 3.884 12.37 7.221 12.37s5.572-3.831 7.221-12.37h22.686c2.911 0 5.923-1.909 5.923-5.103v-5.63c0-2.722-2.211-5.553-4.924-6.311l-20.206-5.682 6.516-22.229c.299-.755 1.432-3.905 1.432-8.232 0-4.811.835-14.062 1.756-22.814h29.087c2.801 0 7.403-.4 10.405-1.139l19.245-4.622c3.751-.924 6.689-4.711 6.689-8.623V66.103c-.001-4.264-3.305-7.733-7.365-7.733">');const Ue=(e={})=>(()=>{var n=Ye();return ae(n,e,!0,!0),n})();var qe=w('<svg xmlns=http://www.w3.org/2000/svg xml:space=preserve width=800 height=800 fill=currentColor viewBox="0 0 512 512"><path d="m22.092 396.979 15.203 67.079h403.562l22.803-67.079zM456.224 254.777c-2.211-10.618-6.696-20.409-12.912-28.85h67.733v-30.404H315v59.254h-42.786l-20.269 44.719h-17.133v-49.26H45.965v49.26H0l15.202 67.079h458.793L512 254.777z"></path><path d="M155.591 170.571v-20.269h48.905V73.279h-48.905V47.942h-30.404v25.337H76.282v77.023h48.905v20.269H45.965v49.261h188.847v-49.261z">');const Qe=(e={})=>(()=>{var n=qe();return ae(n,e,!0,!0),n})();function Ae(e,n){const r=e.y%2===0?"top-right":"top-left",l={row:e.y,col:e.x,corner:r},o=75,i=2,s=40,c=o+i*2;let d,a;switch(l.corner){case"top-left":d=l.col*2*c,a=l.row*c;break;case"top-right":d=(l.col*2+1)*c,a=l.row*c;break}const u=d-n.size/2+s+1.5,h=a-n.size/2+s+1.5;return{position:"absolute",left:`${u}px`,top:`${h}px`}}const Ze=e=>{switch(e){case"ship":return Qe;case"plane":return Ue;case"kamikaze":return Xe}},re=e=>{switch(e){case"red":return"#FF0000";case"blue":return"#0000FF"}};var en=w("<span style=font-weight:600>"),nn=w("<h2 style=margin-top:0>Game Over"),tn=w("<p>The winner is <!>!"),ln=w("<p>The game has ended in a draw.");const on=e=>{const{theme:n}=Ce(),r=e.winner&&(()=>{var l=en();return R(l,()=>e.winner.toLocaleUpperCase()),O(o=>se(l,{...n()==="light"&&{color:re(e.winner)}},o)),l})();return[nn(),K(()=>K(()=>!!e.winner)()?(()=>{var l=tn(),o=l.firstChild,i=o.nextSibling;return i.nextSibling,R(l,r,i),l})():ln())]},rn="_container_6tcgd_1",an={container:rn},$e=Te();function Z(){const e=ke($e);if(!e)throw new Error("can't find GameContext");return e}const sn="_container_8zjzd_1",un="_button_8zjzd_9",dn="_players_8zjzd_26",cn="_player_8zjzd_26",pn="_turnIndicator_8zjzd_46",fn="_icon_8zjzd_51",hn="_red_8zjzd_58",yn="_blue_8zjzd_62",S={container:sn,button:un,players:dn,player:cn,turnIndicator:pn,icon:fn,red:hn,blue:yn};var bn=w("<button type=button>Reset Game"),vn=w("<div><div><div><div></div><div></div><p></p></div><div><div></div><div></div><p>"),mn=w("<button type=button>ONE_MOVE_TO_WIN"),gn=w("<button type=button>BLUE_STALEMATE_OR_DECISIVE");const he="â˜…",Bn=()=>{const{gameConfig:e,game:n,setGame:r,initialPieces:l}=Z(),{closeModal:o}=be(),i=z(()=>e.gameType==="local"?{red:"Player 1",blue:"Player 2"}:e.player==="red"?{red:"me",blue:"peer"}:{red:"peer",blue:"me"});function s(c="normal"){return d=>{d.preventDefault();let a=l;J(()=>{o(),r(Le(Re({pieces:a,player:n.player,turn:n.turn}),{merge:!0}))})}}return(()=>{var c=vn(),d=c.firstChild,a=d.firstChild,u=a.firstChild,h=u.nextSibling,b=h.nextSibling,y=a.nextSibling,f=y.firstChild,g=f.nextSibling,v=g.nextSibling;return R(c,A(W,{get when(){return e.gameType==="local"},get children(){return[(()=>{var p=bn();return ne(p,"click",s(),!0),O(()=>B(p,S.button)),p})(),K(()=>K(()=>!1)()&&[(()=>{var p=mn();return ne(p,"click",s("ONE_MOVE_TO_WIN"),!0),O(()=>B(p,S.button)),p})(),(()=>{var p=gn();return ne(p,"click",s("BLUE_STALEMATE_OR_DECISIVE"),!0),O(()=>B(p,S.button)),p})()])]}}),d),R(u,A(W,{get when(){return n.turn==="red"},children:he})),R(b,()=>i().red),R(f,A(W,{get when(){return n.turn==="blue"},children:he})),R(v,()=>i().blue),O(p=>{var P=S.container,M=S.players,m=S.player,_=S.turnIndicator,C={[S.icon]:!0,[S.red]:!0,[S.isTurn]:n.turn==="red"},L=S.player,j=S.turnIndicator,F={[S.icon]:!0,[S.blue]:!0,[S.isTurn]:n.turn==="blue"};return P!==p.e&&B(c,p.e=P),M!==p.t&&B(d,p.t=M),m!==p.a&&B(a,p.a=m),_!==p.o&&B(u,p.o=_),p.i=ce(h,C,p.i),L!==p.n&&B(y,p.n=L),j!==p.s&&B(f,p.s=j),p.h=ce(g,F,p.h),p},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),c})()};ue(["click"]);const Pn="_board_cgs6j_1",wn="_cell_cgs6j_23",_n="_line1_cgs6j_71",Sn="_line2_cgs6j_72",Rn="_dot_cgs6j_89",An="_topLeft_cgs6j_97",$n="_bottomLeft_cgs6j_102",xn="_topRight_cgs6j_107",On="_bottomRight_cgs6j_112",$={board:Pn,cell:wn,line1:_n,line2:Sn,dot:Rn,topLeft:An,bottomLeft:$n,topRight:xn,bottomRight:On},Cn="_piece_xuywa_1",Tn="_selected_xuywa_17",kn="_disabled_xuywa_27",Mn="_icon_xuywa_28",jn="_number_xuywa_29",G={piece:Cn,selected:Tn,disabled:kn,icon:Mn,number:jn};var En=w("<div>"),In=w("<button type=button>");const zn=e=>{const n=U(()=>e.id),{gameConfig:r,game:l,setGame:o,pieceToDestinations:i}=Z(),s=l.pieces[n],c=U(()=>s.owner),d=z(()=>c===l.player||r.gameType==="local"),a=z(()=>l.selectedPieceId===n),u=z(()=>d()&&c===l.turn&&i()[n]?.length),h=b=>{b.preventDefault(),o("selectedPieceId",a()?void 0:n)};return A(W,{get when(){return l.pieces[n].status==="in-play"},get children(){var b=In();return b.$$click=h,R(b,A(W,{get when(){return s.type!=="kamikaze"},get children(){var y=En();return R(y,()=>U(()=>s.number)),O(()=>B(y,G.number)),y}}),null),R(b,A(Me,{get component(){return Ze(s.type)},get class(){return G.icon}}),null),O(y=>{var f=`${s.type} Piece ${n}`,g=a(),v=!u(),p=[G.piece,a()&&d()&&G.selected,!u()&&d()&&G.disabled].filter(Boolean).join(" "),P={...Ae(s.position,{size:50}),color:re(c),"border-color":re(c)};return f!==y.e&&pe(b,"aria-label",y.e=f),g!==y.t&&pe(b,"aria-pressed",y.t=g),v!==y.a&&(b.disabled=y.a=v),p!==y.o&&B(b,y.o=p),y.i=se(b,P,y.i),y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),b}})};ue(["click"]);const Dn="_destinationMarker_uivrd_1",Nn={destinationMarker:Dn};var Ln=w("<button type=button>");const Fn=e=>{const{game:n,makeMove:r}=Z(),l=o=>{if(o.preventDefault(),!n.selectedPieceId){console.error(`No piece selected for destination ${JSON.stringify(e.destination.position,null,2)}`);return}const i=n.pieces[n.selectedPieceId];r({eventType:"moveMade",piece:i,moveType:e.destination.moveType,from:n.pieces[n.selectedPieceId].position,to:e.destination.position})};return(()=>{var o=Ln();return o.$$click=l,O(i=>{var s=Nn.destinationMarker,c={...Ae(e.destination.position,{size:44})};return s!==i.e&&B(o,i.e=s),i.t=se(o,c,i.t),i},{e:void 0,t:void 0}),o})()};ue(["click"]);var Gn=w("<div id=gameBoard>"),ye=w("<div><div></div><div></div><div>");const Hn=()=>{const{game:e,pieceToDestinations:n}=Z(),r=Array.from({length:49});return(()=>{var l=Gn();return R(l,A(fe,{each:r,children:(o,i)=>{const s=Math.floor(i/7),c=i%7,d=s%2===0,a=c%2===0;return d&&!a||!d&&a?(()=>{var u=ye(),h=u.firstChild,b=h.nextSibling,y=b.nextSibling;return O(f=>{var g=$.cell,v=$.line1,p=`${$.dot} ${$.topLeft}`,P=`${$.dot} ${$.bottomRight}`;return g!==f.e&&B(u,f.e=g),v!==f.t&&B(h,f.t=v),p!==f.a&&B(b,f.a=p),P!==f.o&&B(y,f.o=P),f},{e:void 0,t:void 0,a:void 0,o:void 0}),u})():(()=>{var u=ye(),h=u.firstChild,b=h.nextSibling,y=b.nextSibling;return O(f=>{var g=$.cell,v=$.line2,p=`${$.dot} ${$.topRight}`,P=`${$.dot} ${$.bottomLeft}`;return g!==f.e&&B(u,f.e=g),v!==f.t&&B(h,f.t=v),p!==f.a&&B(b,f.a=p),P!==f.o&&B(y,f.o=P),f},{e:void 0,t:void 0,a:void 0,o:void 0}),u})()}}),null),R(l,A(fe,{get each(){return Object.keys(e.pieces)},children:o=>A(zn,{get id(){return o()}})}),null),R(l,A(je,{get each(){return K(()=>!!e.selectedPieceId)()?n()[e.selectedPieceId]:[]},children:o=>A(Fn,{destination:o})}),null),O(()=>B(l,$.board)),l})()};var Jn=w("<div>");const Vn=e=>{const n=We,r=U(()=>(e.gameConfig.gameType==="local"?Je("local"):void 0)??Re({pieces:n,player:e.gameConfig.gameType!=="local"?e.gameConfig.player:"blue",turn:e.gameConfig.turn})),[l,o]=Ne(r),{setModal:i}=be(),s=z(()=>_e(l.pieces)),c=z(()=>we({pieces:l.pieces,turn:l.turn,board:s(),lastMove:l.lastMove,winner:l.winner}));e.gameConfig.gameType==="local"&&V(q(()=>JSON.stringify(l),async(a,u)=>{e.gameConfig.gameType==="local"&&localStorage.setItem(Se("local"),a)},{defer:!0})),V(q(()=>[l.phase,l.winner],()=>{l.phase===Y.Finished&&i(A(on,{get winner(){return l.winner}}))},{defer:!0})),Ve({emitter:e.emitter,gameConfig:e.gameConfig,game:l,pieceToDestinations:c}),te(e.emitter,"moveMade",a=>{J(()=>{if(a.moveType==="attack"){const b=a.from.y%2===0?Math.max(a.from.x,a.to.x):Math.min(a.from.x,a.to.x),y=(a.from.y+a.to.y)/2,f=s()[b][y];if(f){o("pieces",f.id,"status","destroyed");const g=Ge(f.id);for(const v of g)l.pieces[v].type==="plane"&&o("pieces",v,"status","destroyed")}}o("lastMove",a),o("pieces",a.piece.id,"position",a.to);const u=a.piece.owner==="red"?7:0;a.to.y===u&&a.piece.type==="plane"&&o("pieces",a.piece.id,"type","kamikaze")})}),te(e.emitter,"turnChange",a=>{J(()=>{o("turn",a.to),o("selectedPieceId",void 0)})}),te(e.emitter,"gameEnd",a=>{J(()=>{o("phase",Y.Finished),o("winner",a.winner)})});function d(a){e.emitter.emit("moveMade",a),e.gameConfig.gameType==="online"&&e.gameConfig.sendGameEvent(a)}return A($e.Provider,{get value(){return{gameConfig:e.gameConfig,game:l,setGame:o,pieceToDestinations:c,initialPieces:n,makeMove:d}},get children(){var a=Jn();return R(a,A(Bn,{}),null),R(a,A(Hn,{}),null),O(()=>B(a,an.container)),a}})};let Kn=()=>({emit(e,...n){for(let r=this.events[e]||[],l=0,o=r.length;l<o;l++)r[l](...n)},events:{},on(e,n){var r;return((r=this.events)[e]||(r[e]=[])).push(n),()=>{this.events[e]=this.events[e]?.filter(l=>n!==l)}}});export{Vn as G,Ne as a,Kn as c};
